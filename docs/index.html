<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="index.css">
  <title>TLS, byte by byte</title>
</head>

<body>
  <div id="controls">
    <a href="#" onclick="window.scrollTo({ top: 0 }); return false;">▲ Top</a> &nbsp;
    <a href="#" onclick="window.scrollTo({ top: 99999 }); return false;">▼ Bottom</a> &nbsp;
    <a href="#" onclick="document.querySelectorAll('input').forEach(i => i.checked = true); return false;">◀︎|▶︎ Expand all</a> &nbsp;
    <a href="#" onclick="document.querySelectorAll('input').forEach(i => i.checked = false); return false;">▶︎|◀︎ Collapse all</a>
  </div>

  <div id="tabs">
    <a class="tab" id="https" href="/"><span>https://</span></a>
    <a class="tab" id="postgres" href="/?postgres"><span>postgresql://</span></a>
  </div>

  <div class="discussion">
    <h1 id="heading">See this page fetch itself, byte by byte, over TLS</h1>
    <ul>
      <li id="description">This page performs a live, annotated HTTPS request for its own source. It’s inspired by <a href="https://tls13.xargs.org/">The Illustrated TLS 1.3 Connection</a> and Julia Evans’ <a href="https://jvns.ca/blog/2022/03/23/a-toy-version-of-tls/">toy TLS 1.3</a>.</li>
      <li>It’s built on <a href="https://github.com/jawj/subtls">subtls</a>, a pure-JS TLS 1.3 implementation that depends only on <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto">SubtleCrypto</a>.</li>
      <li>TCP traffic is carried via a simple <a href="https://github.com/jawj/subtls/blob/main/subtls-wsproxy/worker.ts">WebSocket proxy</a>, and what’s shown is byte-by-byte starting at the TCP level (bytes at IP level and below can’t be shown).</li>
    </ul>
    <p>
      <label id="http2"><input type="checkbox" checked="checked"> Use HTTP/2</label>
      <input id="go" type="button" value="Get this page, byte by byte">
    </p>
    <p><span class="hex" style="color: #111"><span style="color: #fff; background: #777"> Key </span> Raw bytes in hexadecimal.</span> <span class="hex" style="color: #8cc">Outgoing message annotations.</span> <span class="hex" style="color: #88c">Incoming message annotations.</span></p>
  </div>

  <div id="logs"></div>

  <div class="easter discussion">
    <p><a href="https://github.com/jawj/subtls">» Code on GitHub</a>. Run <i>bytebybyte.dev</i> locally and try your own https:// and postgresql:// URLs. Made by <a style="color: inherit" href="https://github.com/jawj">@jawj</a>.</p>
  </div>

  <script src="index.js"></script>
  <script async data-id="101426307" src="//static.getclicky.com/js"></script>
</body>

</html>